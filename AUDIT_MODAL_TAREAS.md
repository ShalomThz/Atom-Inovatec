# üìù Gu√≠a: Ver y Registrar Auditor√≠as en Tareas

## üéØ D√≥nde Ver las Auditor√≠as

Las auditor√≠as ahora est√°n **integradas directamente en el modal de edici√≥n de tareas**, no en un recurso separado.

### Pasos para ver/registrar auditor√≠a:

1. **Ir a Tareas** ‚Üí Panel de admin ‚Üí Secci√≥n de Tareas
2. **Editar una tarea** ‚Üí Hacer clic en el bot√≥n de edici√≥n
3. **Ver pesta√±a "Auditor√≠a"** ‚Üí En el formulario modal

---

## üìä Vista de la Pesta√±a Auditor√≠a

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Informaci√≥n General ‚îÇ Asignaci√≥n ‚îÇ Fechas ‚îÇ Auditor√≠a‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Registrar Observaci√≥n                               ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ [Describe la auditor√≠a o cambios detectados       ] ‚îÇ
‚îÇ [                                                   ] ‚îÇ
‚îÇ [                                                   ] ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Estado               ‚îÇ Notas de Implementaci√≥n      ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ [‚úÖ Aprobado       ] ‚îÇ [C√≥mo se implement√≥...      ] ‚îÇ
‚îÇ [‚è≥ Observado      ] ‚îÇ [                            ] ‚îÇ
‚îÇ [‚ùå Rechazado      ] ‚îÇ [                            ] ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

 üíæ GUARDAR
```

---

## üìã C√≥mo Usar

### Crear una auditor√≠a:

1. Abre el modal de edici√≥n de una tarea
2. Ve a la pesta√±a **"Auditor√≠a"**
3. Llena los campos:
   - **Registrar Observaci√≥n**: Describe qu√© se audit√≥ (ej: "Se verific√≥ la asignaci√≥n correcta de la tarea")
   - **Estado**: Selecciona uno de:
     - ‚úÖ **Aprobado**: Sin problemas encontrados
     - ‚è≥ **Observado**: Requiere acci√≥n (por defecto)
     - ‚ùå **Rechazado**: No procede
   - **Notas de Implementaci√≥n**: Solo se muestra si el estado NO es "Observado". Aqu√≠ documentas c√≥mo se resolvi√≥.

4. Haz clic en **"Guardar"** (o **"Actualizar"**)

---

## üîÑ Flujo de Auditor√≠a en Tareas

```
CREAR AUDITOR√çA
    ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Estado: OBSERVADO ‚è≥     ‚îÇ  ‚Üê Requiere acci√≥n
‚îÇ Fecha: Hoy 20:15       ‚îÇ
‚îÇ Auditor: Tu nombre     ‚îÇ
‚îÇ Observaciones: ...     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
    ‚Üì
[Alguien corrige/implementa]
    ‚Üì
ACTUALIZAR AUDITOR√çA
    ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Estado: APROBADO ‚úÖ     ‚îÇ  ‚Üê Problema resuelto
‚îÇ Fecha: Hoy 20:15       ‚îÇ
‚îÇ Implementado: Hoy 21:00‚îÇ
‚îÇ Notas: "Se hizo X..."  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üìå Historial de Auditor√≠as

Debajo del formulario, ver√°s un **historial de todas las auditor√≠as registradas** para esa tarea:

```
üìã Auditor√≠as Registradas

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
"Se verific√≥ asignaci√≥n correcta"    ‚úÖ Aprobado
Auditor: admin@example.com
Fecha: 10/12/2025 20:03
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
"Requiere mejorar descripci√≥n"       ‚è≥ Observado
Auditor: usuario@example.com
Fecha: 09/12/2025 15:30
Implementado: Pendiente
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
```

---

## üõ†Ô∏è Ejemplos Pr√°cticos

### Ejemplo 1: Auditor√≠a de Verificaci√≥n Simple

**Observaci√≥n:** "Se verific√≥ que la tarea est√° correctamente asignada y tiene fecha de inicio v√°lida"
**Estado:** ‚úÖ Aprobado
**Notas:** (no es necesario llenar)

**Resultado:** Auditor√≠a registrada como aprobada inmediatamente.

---

### Ejemplo 2: Auditor√≠a con Problema Detectado

**Observaci√≥n:** "La descripci√≥n de la tarea es muy vaga. Se requiere m√°s detalle sobre los requisitos"
**Estado:** ‚è≥ Observado
**Notas:** (vac√≠o - pendiente de implementaci√≥n)

**Resultado:** Auditor√≠a queda en estado "Observado" esperando que alguien corrija la descripci√≥n.

---

### Ejemplo 3: Auditor√≠a Resuelta

**Observaci√≥n:** "La descripci√≥n de la tarea es muy vaga. Se requiere m√°s detalle sobre los requisitos"
**Estado:** ‚úÖ Aprobado
**Notas:** "Se actualiz√≥ la descripci√≥n con los requisitos espec√≠ficos: debe incluir validaci√≥n de emails, logs de errores y manejo de excepciones"

**Resultado:** Auditor√≠a registrada como aprobada con fecha de implementaci√≥n.

---

## üí° Casos de Uso en el Proyecto

### Para L√≠der de Proyecto:
- Auditar asignaci√≥n de tareas
- Verificar fechas y prioridades
- Revisar descripci√≥n y alcance

### Para Desarrollador:
- Registrar cambios en descripci√≥n
- Marcar problemas encontrados
- Documentar soluciones implementadas

### Para Admin:
- Auditor√≠a general del sistema
- Validar permisos
- Revisar calidad de datos

---

## üîó Integraci√≥n con la Base de Datos

Cuando registras una auditor√≠a en el modal, se crea un registro en la tabla `audit_observaciones`:

```
Table: audit_observaciones
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ tipo: 'tarea'                           ‚îÇ
‚îÇ entidad_id: [ID de la tarea]            ‚îÇ
‚îÇ user_id: [Tu ID]                        ‚îÇ
‚îÇ observaciones: [Lo que escribiste]      ‚îÇ
‚îÇ estado: 'aprobado'/'observado'/...      ‚îÇ
‚îÇ fecha_auditoria: [Fecha/Hora ahora]     ‚îÇ
‚îÇ fecha_implementacion: [Cuando se aprob√≥]‚îÇ
‚îÇ notas_implementacion: [C√≥mo se resolvi√≥]‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## ‚öôÔ∏è API de Auditor√≠a (Para Desarrolladores)

Si quieres programar auditor√≠as desde c√≥digo:

```php
use App\Models\AuditObservacion;

// Crear auditor√≠a
AuditObservacion::create([
    'tipo' => 'tarea',
    'entidad_id' => $tarea->id,
    'user_id' => auth()->id(),
    'observaciones' => 'Verificaci√≥n de calidad completada',
    'estado' => 'aprobado',
    'fecha_auditoria' => now(),
    'fecha_implementacion' => now(),
    'notas_implementacion' => 'Todos los requisitos cumplidos',
]);

// Ver auditor√≠as de una tarea
$tarea->auditorias()->get();

// Ver auditor√≠as pendientes
AuditObservacion::pendientesImplementacion()->get();
```

---

## ‚úÖ Checklist de Implementaci√≥n

- [x] Pesta√±a "Auditor√≠a" agregada al modal de tareas
- [x] Relaci√≥n entre Tarea y AuditObservacion creada
- [x] Guardado autom√°tico de auditor√≠as en DB
- [x] Historial de auditor√≠as visible en el modal
- [x] Estados (aprobado, observado, rechazado) funcionando
- [x] Fechas de implementaci√≥n autom√°ticas

---

**Versi√≥n:** 2.0  
**Fecha:** 2025-12-10  
**Estado:** ‚úÖ Implementado en modal de tareas
